{"version":3,"file":"src_app_views_admin-fax-settings_account-purchase_account-purchase_module_ts.js","mappings":"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","sources":["./src/app/views/admin-fax-settings/account-purchase/account-purchase.component.ts","./src/app/views/admin-fax-settings/account-purchase/account-purchase.component.html","./src/app/views/admin-fax-settings/account-purchase/account-purchase.module.ts","./src/app/views/admin-fax-settings/account-purchase/purchase-confirmation/purchase-confirmation.component.ts","./src/app/views/admin-fax-settings/account-purchase/purchase-confirmation/purchase-confirmation.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Account, IPrePaidPart, OutboundPricing } from '../../../blocks/InterFAX/Models/admin';\r\nimport { WizardBarPage } from '../../../blocks/components/wizard-bar/wizard-bar.component';\r\nimport { ErrorsService } from '../../../blocks/services/errors.service';\r\nimport { InterFAXService } from '../../../blocks/services/interfax.service';\r\nimport { Control } from '../../../blocks/services/models';\r\nimport { SpinnerStateService } from '../../../blocks/services/spinner-state.service';\r\nimport { PaymentMethods } from 'shared-code-lib';\r\n\r\nexport class Purchase {\r\n  public part: IPrePaidPart;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-account-purchase',\r\n  templateUrl: './account-purchase.component.html',\r\n  styleUrls: ['./account-purchase.component.scss'],\r\n})\r\nexport class AccountPurchaseComponent implements OnInit {\r\n  @ViewChild('spinnerWrapper', { static: true })\r\n  spinnerWrapper: ElementRef;\r\n\r\n  formControls: Array<Control> = [];\r\n\r\n  account: Account;\r\n  prePaidParts: Array<IPrePaidPart>;\r\n\r\n  purchase = new Purchase();\r\n\r\n  pages = new Array<WizardBarPage>();\r\n  selectedPage = 0;\r\n\r\n  selectedPageId = '';\r\n  nextButtonText: string;\r\n\r\n  show = false;\r\n\r\n  valid = false;\r\n\r\n  constructor(\r\n    private translateService: TranslateService,\r\n    private spinnerService: SpinnerStateService,\r\n    private interfaxService: InterFAXService,\r\n    private toastrService: ToastrService,\r\n    private router: Router,\r\n    private errorsService: ErrorsService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.addPage('packages');\r\n    this.addPage('confirmation');\r\n\r\n    this.selectedPageId = 'packages';\r\n\r\n    this.spinnerService.show(\r\n      this.translateService.instant('account-purchase.loading-details'),\r\n      this.spinnerWrapper.nativeElement\r\n    );\r\n\r\n    this.interfaxService.getAccountOutboundPricing('', this.pricingLoaded, this.loadFailed);\r\n  }\r\n\r\n  pricingLoaded = (op: OutboundPricing): void => {\r\n    this.prePaidParts = op.prePaidParts;\r\n\r\n    this.interfaxService.getAccount(this.accountLoaded, this.loadFailed);\r\n  };\r\n\r\n  onValid = (valid: boolean) => {\r\n    this.valid = this.hasValidPaymentMeans() && valid;\r\n  };\r\n\r\n  onPartSelected = (part: IPrePaidPart) => {\r\n    this.purchase.part = part;\r\n  };\r\n\r\n  accountLoaded = (a: Account): void => {\r\n    this.account = a;\r\n\r\n    this.spinnerService.hide();\r\n    this.show = true;\r\n  };\r\n\r\n  loadFailed = (): void => {\r\n    this.spinnerService.hide();\r\n    this.toastrService.error(this.translateService.instant('account-purchase.failed-to-load-account-details'));\r\n  };\r\n\r\n  addPage = (id: string): void => {\r\n    this.pages.push(new WizardBarPage(id, this.translateService.instant(`account-purchase.wizard-page-${id}`)));\r\n  };\r\n\r\n  onBack = () => {\r\n    this.selectedPage--;\r\n    this.update();\r\n  };\r\n\r\n  onNext = () => {\r\n    if (this.selectedPage == this.pages.length - 1) {\r\n      this.purchasePPCard();\r\n    } else {\r\n      this.valid = false;\r\n      this.selectedPage++;\r\n      this.update();\r\n    }\r\n  };\r\n\r\n  hasValidPaymentMeans = (): boolean => {\r\n    if (this.account?.paymentMeans === PaymentMethods.CC) return this.account.creditCard?.valid;\r\n\r\n    return this.account?.paymentMeans === PaymentMethods.DD || this.account?.paymentMeans === PaymentMethods.PayPal;\r\n  };\r\n\r\n  onCancel = () => {\r\n    this.close();\r\n  };\r\n\r\n  close = () => {\r\n    this.router.navigateByUrl(\r\n      'product/settings/InterFAX/InterFAX-Upland.Bamba.InterFAX.Administration.PrePaidCards.Folder'\r\n    );\r\n  };\r\n\r\n  update = (): void => {\r\n    this.nextButtonText = this.selectedPage == this.pages.length - 1 ? 'account-purchase.purchase' : 'App.next';\r\n    this.selectedPageId = this.pages[this.selectedPage].id;\r\n  };\r\n\r\n  purchasePPCard = (): void => {\r\n    this.spinnerService.show(\r\n      this.translateService.instant('account-purchase.purchasing'),\r\n      this.spinnerWrapper.nativeElement\r\n    );\r\n\r\n    this.interfaxService.purchaseParts(\r\n      [this.purchase.part.basePart],\r\n      this.purchasePPCardSucceeded,\r\n      this.purchasePPCardFailed\r\n    );\r\n  };\r\n\r\n  purchasePPCardSucceeded = (): void => {\r\n    this.spinnerService.hide();\r\n    this.toastrService.success(this.translateService.instant('account-purchase.purchase-succeeded'));\r\n    this.close();\r\n  };\r\n\r\n  purchasePPCardFailed = (e: any): void => {\r\n    this.spinnerService.hide();\r\n    this.errorsService.showErrorsModal(e, this.translateService.instant('account-purchase.purchase-failed'));\r\n  };\r\n}\r\n","<div class=\"account-purchase project-list-dashboard-body d-flex flex-column min-h-fit-content\" #spinnerWrapper>\r\n  <app-secondary-header [headerText]=\"'account-purchase.header-text' | translate\" [rightControls]=\"formControls\">\r\n  </app-secondary-header>\r\n\r\n  <div class=\"container-fluid col\" id=\"spinnerPanel\">\r\n    <div *ngIf=\"show\" class=\"h-100 m-0 d-flex\">\r\n      <div class=\"properties-panel\">\r\n        <app-wizard-bar [pages]=\"pages\" [selectedPage]=\"selectedPage\"></app-wizard-bar>\r\n      </div>\r\n\r\n      <div class=\"d-flex flex-column methods-panel col\">\r\n        <div class=\"warning p-1 m-1\" *ngIf=\"!hasValidPaymentMeans()\">\r\n          {{ 'account-purchase.no-payment-method' | translate }}\r\n        </div>\r\n\r\n        <div class=\"row wizard-panel\">\r\n          <app-select-prepaid-card\r\n            *ngIf=\"selectedPageId === 'packages'\"\r\n            [prePaidParts]=\"prePaidParts\"\r\n            [enabled]=\"true\"\r\n            (valid)=\"onValid($event)\"\r\n            [selected]=\"purchase.part\"\r\n            (onPartSelected)=\"onPartSelected($event)\"\r\n          >\r\n          </app-select-prepaid-card>\r\n\r\n          <app-purchase-confirmation\r\n            *ngIf=\"selectedPageId === 'confirmation'\"\r\n            [purchase]=\"purchase\"\r\n            (valid)=\"onValid($event)\"\r\n          ></app-purchase-confirmation>\r\n        </div>\r\n\r\n        <div class=\"row actions-panel\">\r\n          <app-wizard-buttons\r\n            class=\"w-100\"\r\n            [backEnabled]=\"selectedPage !== 0\"\r\n            [nextEnabled]=\"valid\"\r\n            [nextButtonText]=\"nextButtonText\"\r\n            (onCancel)=\"onCancel()\"\r\n            (onBack)=\"onBack()\"\r\n            (onNext)=\"onNext()\"\r\n          ></app-wizard-buttons>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AccountPurchaseComponent } from './account-purchase.component';\r\n\r\nimport {\r\n  AutoFocusFirstInputModule,\r\n  TabBarModule,\r\n  FieldsModule,\r\n  CheckboxModule,\r\n  ModalHeaderModule,\r\n  LabelModule,\r\n  IconsModule,\r\n} from 'shared-code-lib';\r\nimport { PageModule } from '../../../blocks/page/page.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../blocks/components/components.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar-portable';\r\nimport { NgxSmartModalModule } from 'ngx-smart-modal';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AdminInboundFaxSettingsModule } from '../admin-inbound-fax-settings/admin-inbound-fax-settings.module';\r\nimport { AccountComponentsModule } from '../account-components/account-components.module';\r\nimport { PurchaseConfirmationComponent } from './purchase-confirmation/purchase-confirmation.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AccountPurchaseComponent,\r\n    data: { type: 'properties' },\r\n    pathMatch: 'full',\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n  declarations: [],\r\n})\r\nexport class AccountPurchaseRoutingModule {}\r\n\r\n@NgModule({\r\n  declarations: [AccountPurchaseComponent, PurchaseConfirmationComponent],\r\n  imports: [\r\n    CommonModule,\r\n    TranslateModule,\r\n    PageModule,\r\n    ComponentsModule,\r\n    FormsModule,\r\n    PerfectScrollbarModule,\r\n    IconsModule,\r\n    FieldsModule,\r\n    AutoFocusFirstInputModule,\r\n    TabBarModule,\r\n    CheckboxModule,\r\n    NgxSmartModalModule,\r\n    ModalHeaderModule,\r\n    LabelModule,\r\n    AccountPurchaseRoutingModule,\r\n    AdminInboundFaxSettingsModule,\r\n    AccountComponentsModule,\r\n  ],\r\n})\r\nexport class AccountPurchaseModule {}\r\n","import { Component, OnInit, Input, EventEmitter, Output } from '@angular/core';\r\nimport { IPrePaidPart, IPurchaseSummary } from '../../../../blocks/InterFAX/Models/admin';\r\nimport { InterFAXService } from '../../../../blocks/services/interfax.service';\r\nimport { ISummaryProvider } from '../../account-components/parts-invoice/parts-invoice.component';\r\nimport { Purchase } from '../account-purchase.component';\r\n\r\nclass SummaryProvider implements ISummaryProvider {\r\n  constructor(private interfaxService: InterFAXService, private part: IPrePaidPart) { }\r\n\r\n  load(successCallBack: (id: IPurchaseSummary) => void, failureCallBack: (err: any) => void): void {\r\n    this.interfaxService.getPurchaseSummary([this.part.basePart], successCallBack, failureCallBack);\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'app-purchase-confirmation',\r\n  templateUrl: './purchase-confirmation.component.html',\r\n  styleUrls: ['./purchase-confirmation.component.scss'],\r\n})\r\nexport class PurchaseConfirmationComponent implements OnInit {\r\n  @Input() purchase: Purchase;\r\n  @Output() valid = new EventEmitter<boolean>();\r\n\r\n  summaryProvider: SummaryProvider;\r\n\r\n  constructor(private interfaxService: InterFAXService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.summaryProvider = new SummaryProvider(this.interfaxService, this.purchase.part);\r\n    this.valid.next(false);\r\n  }\r\n\r\n  onDisplay = (): void => {\r\n    this.valid.next(true);\r\n  };\r\n}\r\n","<div class=\"purchase-confirmation\">\r\n  <app-section-header [text]=\"'parts-invoice.confirm-purchase'\" [image]=\"'material/fax.svg'\"></app-section-header>\r\n\r\n  <app-parts-invoice [summaryProvider]=\"summaryProvider\" (display)=\"onDisplay()\"></app-parts-invoice>\r\n</div>\r\n"],"names":["ElementRef","Router","TranslateService","ToastrService","WizardBarPage","ErrorsService","InterFAXService","SpinnerStateService","PaymentMethods","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵlistener","AccountPurchaseComponent_div_5_app_select_prepaid_card_6_Template_app_select_prepaid_card_valid_0_listener","$event","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","onValid","AccountPurchaseComponent_div_5_app_select_prepaid_card_6_Template_app_select_prepaid_card_onPartSelected_0_listener","onPartSelected","ɵɵproperty","prePaidParts","purchase","part","AccountPurchaseComponent_div_5_app_purchase_confirmation_7_Template_app_purchase_confirmation_valid_0_listener","_r4","ɵɵelement","ɵɵtemplate","AccountPurchaseComponent_div_5_div_4_Template","AccountPurchaseComponent_div_5_app_select_prepaid_card_6_Template","AccountPurchaseComponent_div_5_app_purchase_confirmation_7_Template","AccountPurchaseComponent_div_5_Template_app_wizard_buttons_onCancel_9_listener","_r1","onCancel","AccountPurchaseComponent_div_5_Template_app_wizard_buttons_onBack_9_listener","onBack","AccountPurchaseComponent_div_5_Template_app_wizard_buttons_onNext_9_listener","onNext","pages","selectedPage","hasValidPaymentMeans","selectedPageId","valid","nextButtonText","Purchase","AccountPurchaseComponent","constructor","translateService","spinnerService","interfaxService","toastrService","router","errorsService","formControls","Array","show","pricingLoaded","op","getAccount","accountLoaded","loadFailed","a","account","hide","error","instant","addPage","id","push","update","length","purchasePPCard","paymentMeans","CC","creditCard","DD","PayPal","close","navigateByUrl","spinnerWrapper","nativeElement","purchaseParts","basePart","purchasePPCardSucceeded","purchasePPCardFailed","success","e","showErrorsModal","ngOnInit","getAccountOutboundPricing","ɵɵdirectiveInject","i1","i2","i3","i4","i5","i6","selectors","viewQuery","AccountPurchaseComponent_Query","rf","ctx","AccountPurchaseComponent_div_5_Template","CommonModule","AutoFocusFirstInputModule","TabBarModule","FieldsModule","CheckboxModule","ModalHeaderModule","LabelModule","IconsModule","PageModule","TranslateModule","ComponentsModule","FormsModule","PerfectScrollbarModule","NgxSmartModalModule","RouterModule","AdminInboundFaxSettingsModule","AccountComponentsModule","PurchaseConfirmationComponent","routes","path","component","data","type","pathMatch","AccountPurchaseRoutingModule","forChild","imports","exports","AccountPurchaseModule","declarations","NgIf","SecondaryHeaderComponent","WizardBarComponent","WizardButtonsComponent","SelectPrepaidCardComponent","i7","TranslatePipe","EventEmitter","SummaryProvider","load","successCallBack","failureCallBack","getPurchaseSummary","onDisplay","next","summaryProvider","inputs","outputs","decls","vars","consts","template","PurchaseConfirmationComponent_Template","PurchaseConfirmationComponent_Template_app_parts_invoice_display_2_listener"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}