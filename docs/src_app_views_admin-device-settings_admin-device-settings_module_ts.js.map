{"version":3,"file":"src_app_views_admin-device-settings_admin-device-settings_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAC0B;;;AAEjF,MAAME,MAAM,GAAW,CACrB;EACEC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAEH,0FAA4B;EACvCI,SAAS,EAAE;CACZ,CACF;AAMK,MAAOC,gCAAgC;;;uCAAhCA,gCAAgC;IAAA;EAAA;;;YAAhCA;IAAgC;EAAA;;;gBAHjCN,yDAAY,CAACO,QAAQ,CAACL,MAAM,CAAC,EAC7BF,yDAAY;IAAA;EAAA;;;sHAEXM,gCAAgC;IAAAE,OAAA,GAAAC,yDAAA;IAAAC,OAAA,GAFjCV,yDAAY;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbsD;AACvB;AACN;AACN;AACP;AAEsC;AAC/B;AAC0B;AACa;AACG;AACT;;;;;;;;;;;;;;;;;;ICchEyB,6DADF,cAA6D,mCAI1D;IADCA,+DAAA,sCAAAG,0GAAAC,MAAA;MAAAJ,4DAAA,CAAAM,GAAA;MAAA,MAAAC,MAAA,GAAAP,4DAAA;MAAAA,iEAAA,CAAAO,MAAA,CAAAG,cAAA,CAAAC,kBAAA,EAAAP,MAAA,MAAAG,MAAA,CAAAG,cAAA,CAAAC,kBAAA,GAAAP,MAAA;MAAA,OAAAJ,0DAAA,CAAAI,MAAA;IAAA,EAA0D;IAE9DJ,2DADG,EAA2B,EACxB;;;;IAFFA,wDAAA,EAA0D;IAA1DA,+DAAA,uBAAAO,MAAA,CAAAG,cAAA,CAAAC,kBAAA,CAA0D;;;ADRlE,MAAOnC,4BAA4B;EAWvCwC,YACUC,gBAAkC,EAClCC,QAAyB,EACzBC,MAAqB,EACrBC,aAA4B,EAC5BC,OAA4B,EAC5BC,QAAkB,EAClBC,KAAqB,EACrBC,SAA2B;IAP3B,KAAAP,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAAC,QAAQ,GAARA,QAAQ;IACR,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAC,QAAQ,GAARA,QAAQ;IACR,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,SAAS,GAATA,SAAS;IAlBnB,KAAAC,aAAa,GAAmB,EAAE;IAElC,KAAAf,cAAc,GAAmB,IAAIf,2DAAc,EAAE;IAGrD,KAAA+B,SAAS,GAAG,oBAAoB;IAChC,KAAAC,IAAI,GAAG,IAAIC,KAAK,EAAO;IACvB,KAAAC,aAAa,GAAG,IAAIvC,+CAAY,EAAE;IA0C1B,KAAAwC,cAAc,GAAIpB,cAA8B,IAAI;MAC1D,IAAI,CAACA,cAAc,GAAGA,cAAc;IACtC,CAAC;IAED,KAAAqB,MAAM,GAAG,MAAK;MACZ,IAAI,CAACrB,cAAc,CAACC,kBAAkB,GAAG,IAAI,CAACD,cAAc,CAACC,kBAAkB,CAACqB,MAAM,CAAEC,EAAE,IAAKA,EAAE,IAAI,EAAE,CAAC;MACxG,IAAI,CAACf,QAAQ,CAACgB,iBAAiB,CAAC,IAAI,CAACxB,cAAc,EAAE,IAAI,CAACyB,QAAQ,EAAE,IAAI,CAACC,aAAa,EAAE,IAAI,CAACC,UAAU,CAAC;IAC1G,CAAC;IAED,KAAAD,aAAa,GAAIE,MAAkB,IAAI;MACrC,IAAIA,MAAM,CAACC,OAAO,EAAE;QAClB,IAAI,CAACC,YAAY,EAAE;MACrB,CAAC,MAAM;QACL,IAAI,CAACpB,aAAa,CAACqB,eAAe,CAACH,MAAM,CAACI,MAAM,EAAE,gCAAgC,CAAC;MACrF;MAEA,IAAI,CAACrB,OAAO,CAACsB,IAAI,EAAE;IACrB,CAAC;IAED,KAAAN,UAAU,GAAIO,GAAQ,IAAI;MACxB,IAAI,CAACzB,MAAM,CAAC0B,KAAK,CAAC,IAAI,CAAC5B,gBAAgB,CAAC6B,OAAO,CAAC,wBAAwB,CAAC,CAAC;MAC1E,IAAI,CAACzB,OAAO,CAACsB,IAAI,EAAE;IACrB,CAAC;IAED,KAAAI,OAAO,GAAG,MAAK;MACb,IAAI,CAACP,YAAY,EAAE;IACrB,CAAC;IAED,KAAAQ,mBAAmB,GAAIV,MAAiB,IAAI;MAC1C,IAAIA,MAAM,CAACC,OAAO,EAAE;QAClB,IAAI,CAACpB,MAAM,CAACoB,OAAO,CAAC,IAAI,CAACtB,gBAAgB,CAAC6B,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACxE,IAAI,CAACN,YAAY,EAAE;MACrB,CAAC,MAAM;QACL,IAAI,CAACnB,OAAO,CAACsB,IAAI,EAAE;QACnB,IAAI,CAACvB,aAAa,CAACqB,eAAe,CAACH,MAAM,CAACI,MAAM,EAAE,gCAAgC,CAAC;MACrF;IACF,CAAC;IAED,KAAAO,wBAAwB,GAAIL,GAAQ,IAAI;MACtC,IAAI,CAACzB,MAAM,CAAC0B,KAAK,CAAC,IAAI,CAAC5B,gBAAgB,CAAC6B,OAAO,CAAC,0BAA0B,CAAC,CAAC;MAC5E,IAAI,CAACzB,OAAO,CAACsB,IAAI,EAAE;IACrB,CAAC;IAED,KAAAH,YAAY,GAAG,MAAM,IAAI,CAAClB,QAAQ,CAAC4B,IAAI,EAAE;IAEjC,KAAAC,YAAY,GAAG,MAAK;MAC1B,IAAI,CAACC,iBAAiB,GAAG,IAAIxD,4DAAe,CAAC;QAC3CyD,IAAI,EAAExD,yDAAY,CAACyD,IAAI;QACvBC,KAAK,EAAE,IAAI,CAACtC,gBAAgB,CAAC6B,OAAO,CAAC,8BAA8B,CAAC;QACpEU,WAAW,EAAE,IAAI,CAACvC,gBAAgB,CAAC6B,OAAO,CAAC,8BAA8B;OAC1E,CAAC;IACJ,CAAC;IAEO,KAAAW,qBAAqB,GAAIb,GAAQ,IAAI;MAC3C,IAAI,CAACzB,MAAM,CAAC0B,KAAK,CAAC,IAAI,CAAC5B,gBAAgB,CAAC6B,OAAO,CAAC,mCAAmC,CAAC,CAAC;MACrFY,OAAO,CAACC,GAAG,CAACf,GAAG,CAAC;IAClB,CAAC;IAEO,KAAAgB,UAAU,GAAG,MAAK;MACxB,IAAI,CAACjC,IAAI,CAACkC,IAAI,CAAC,IAAI/D,gDAAG,CAAC,oBAAoB,EAAE,IAAI,CAACmB,gBAAgB,CAAC6B,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC;IACnH,CAAC;IAED,KAAAgB,WAAW,GAAIC,IAAI,IAAI;MACrB,IAAI,CAACrC,SAAS,GAAGqC,IAAI;IACvB,CAAC;EA9FE;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;IACpB,IAAI,CAACd,YAAY,EAAE;IACnB,IAAI,CAACS,UAAU,EAAE;IAEjB,IAAI,CAAC/B,aAAa,CAACqC,GAAG,CACpB,IAAI,CAAC3C,KAAK,CAAC4C,MAAM,CAACC,SAAS,CAAED,MAAM,IAAI;MACrC,IAAI,CAAChC,QAAQ,GAAGgC,MAAM,CAAChC,QAAQ,IAAI,IAAI,CAACX,SAAS,CAAC6C,IAAI,CAAClC,QAAQ;MAE/D,IAAI,CAACjB,QAAQ,CAACoD,iBAAiB,CAAC,IAAI,CAACnC,QAAQ,EAAE,IAAI,CAACL,cAAc,EAAE,IAAI,CAAC2B,qBAAqB,CAAC;IACjG,CAAC,CAAC,CACH;EACH;EAEQQ,aAAaA,CAAA;IACnB,IAAI,CAACM,UAAU,GAAG,IAAIrF,4DAAO,CAAC,IAAI,CAAC6C,MAAM,EAAE,MAAM,EAAE,8BAA8B,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC;IACxG,IAAI,CAACyC,WAAW,GAAG,IAAItF,4DAAO,CAAC,IAAI,CAAC6D,OAAO,EAAE,OAAO,EAAE,4BAA4B,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC;IACzG,IAAI,CAACtB,aAAa,CAACoC,IAAI,CAAC,IAAI,CAACU,UAAU,CAAC;IACxC,IAAI,CAAC9C,aAAa,CAACoC,IAAI,CAAC,IAAI,CAACW,WAAW,CAAC;IAEzC,IAAI,CAACvD,gBAAgB,CAACwD,GAAG,CAAC,eAAe,CAAC,CAACL,SAAS,CAAEM,GAAG,IAAI;MAC3D,IAAI,CAACH,UAAU,CAACI,WAAW,CAACD,GAAG,CAAC;IAClC,CAAC,CAAC;IACF,IAAI,CAACzD,gBAAgB,CAACwD,GAAG,CAAC,iBAAiB,CAAC,CAACL,SAAS,CAAEM,GAAG,IAAI;MAC7D,IAAI,CAACF,WAAW,CAACI,cAAc,CAACF,GAAG,CAAC;IACtC,CAAC,CAAC;EACJ;;;uCAhDWlG,4BAA4B,EAAAwB,gEAAA,CAAAhB,kEAAA,GAAAgB,gEAAA,CAAA8E,+EAAA,GAAA9E,gEAAA,CAAA+E,sDAAA,GAAA/E,gEAAA,CAAAgF,0EAAA,GAAAhF,gEAAA,CAAAiF,uFAAA,GAAAjF,gEAAA,CAAAkF,sDAAA,GAAAlF,gEAAA,CAAAmF,4DAAA,GAAAnF,gEAAA,CAAAoF,iFAAA;IAAA;EAAA;;;YAA5B5G,4BAA4B;MAAA6G,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,sCAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCpBzC3F,6DAAA,aAGC;UACCA,wDAAA,8BACuB;;UAMfA,6DAJR,aAAqE,aAChB,aACH,aACvB,mBACsD;UAAlCA,+DAAA,yBAAA8F,uEAAA1F,MAAA;YAAAJ,iEAAA,CAAA4F,GAAA,CAAAlF,cAAA,CAAAqF,MAAA,EAAA3F,MAAA,MAAAwF,GAAA,CAAAlF,cAAA,CAAAqF,MAAA,GAAA3F,MAAA;YAAA,OAAAA,MAAA;UAAA,EAAiC;UAE5EJ,2DAF6E,EAAY,EACjF,EACF;UAIFA,6DAFJ,aAA4F,aACvD,cACH;UAC5BA,qDAAA,IACF;;UACFA,2DADE,EAAM,EACF;UAENA,6DAAA,uBAA+D;UAApCA,yDAAA,yBAAAkG,0EAAA9F,MAAA;YAAA,OAAewF,GAAA,CAAA9B,WAAA,CAAA1D,MAAA,CAAmB;UAAA,EAAC;UAACJ,2DAAA,EAAc;UAE7EA,6DAAA,eAAiE;UAC/DA,yDAAA,KAAAoG,4CAAA,kBAA6D;UAUvEpG,2DAJQ,EAAM,EACF,EACF,EACF,EACF;;;UA/BkBA,wDAAA,EAA8D;UAACA,yDAA/D,eAAAA,0DAAA,4CAA8D,kBAAA4F,GAAA,CAAAnE,aAAA,CAAgC;UAOjGzB,wDAAA,GAA2B;UAA3BA,yDAAA,UAAA4F,GAAA,CAAAxC,iBAAA,CAA2B;UAACpD,+DAAA,UAAA4F,GAAA,CAAAlF,cAAA,CAAAqF,MAAA,CAAiC;UAOtE/F,wDAAA,GACF;UADEA,iEAAA,MAAAA,0DAAA,mDACF;UAGWA,wDAAA,GAAa;UAAbA,yDAAA,SAAA4F,GAAA,CAAAjE,IAAA,CAAa;UAGJ3B,wDAAA,GAAuC;UAAvCA,yDAAA,iCAAA4F,GAAA,CAAAlE,SAAA,CAAuC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBtB;AACF;AAC6C;AACpC;AACO;AACkB;AACE;AACT;AAC4B;AACC;;AAkB/F,MAAOyF,yBAAyB;;;uCAAzBA,yBAAyB;IAAA;EAAA;;;YAAzBA;IAAyB;EAAA;;;gBAblCX,yDAAY,EACZE,gEAAe,EACfC,gEAAU,EACVC,kFAAgB,EAChBH,uDAAW,EACXI,mFAAsB,EACtBK,wDAAW,EACXrI,mGAAgC,EAChCoI,yDAAY,EACZF,sEAAyB,EACzBC,yDAAY;IAAA;EAAA;;;sHAGHG,yBAAyB;IAAAC,YAAA,GAfrB5I,0FAA4B,EAAEsI,6GAA2B;IAAA/H,OAAA,GAEtEyH,yDAAY,EACZE,gEAAe,EACfC,gEAAU,EACVC,kFAAgB,EAChBH,uDAAW,EACXI,mFAAsB,EACtBK,wDAAW,EACXrI,mGAAgC,EAChCoI,yDAAY,EACZF,sEAAyB,EACzBC,yDAAY;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;ACzBkF;AACnD;;;;;;;;;;;;;;ICmBrChH,4DAFJ,SAA4E,SACtE,eAK2C;IADvCA,wDAAA,2BAAAuH,0EAAAnH,MAAA;MAAA,MAAAoH,IAAA,GAAAxH,2DAAA,CAAAM,GAAA,EAAAmH,KAAA;MAAA,MAAAC,MAAA,GAAA1H,2DAAA;MAAA,OAAAA,yDAAA,CAAA0H,MAAA,CAAA/G,kBAAA,CAAA6G,IAAA,IAAApH,MAAA;IAAA,EAAgD;IAExDJ,0DALE,EAI6C,EAC1C;IAELA,4DAAA,YAAqF;;IACnFA,4DAAA,0BAE0B;IAAxBA,wDAAA,mBAAA2H,4EAAA;MAAA,MAAAH,IAAA,GAAAxH,2DAAA,CAAAM,GAAA,EAAAmH,KAAA;MAAA,MAAAC,MAAA,GAAA1H,2DAAA;MAAA,OAAAA,yDAAA,CAAS0H,MAAA,CAAAE,UAAA,CAAAJ,IAAA,CAAa;IAAA,EAAC;IAG7BxH,0DAFI,EAAkB,EACf,EACF;;;;;IAXKA,uDAAA,GAAiC;IAEhCA,wDAFD,YAAA0H,MAAA,CAAA/G,kBAAA,CAAA6G,IAAA,EAAiC,uBAAAA,IAAA,CAAAK,QAAA,GAEG;IAGjB7H,uDAAA,EAAyD;IAAzDA,mEAAA,UAAAA,yDAAA,wCAAyD;;;ADlBtF,MAAO8G,2BAA2B;EAItC9F,YAAoB+G,KAAmB;IAAnB,KAAAA,KAAK,GAALA,KAAK;IAHhB,KAAApH,kBAAkB,GAAkB,EAAE;IACrC,KAAAqH,wBAAwB,GAAG,IAAIX,uDAAY,EAAiB;IAMtE,KAAAO,UAAU,GAAIH,KAAa,IAAU;MACnC,IAAI,CAAC9G,kBAAkB,CAACsH,MAAM,CAACR,KAAK,EAAE,CAAC,CAAC;IAC1C,CAAC;IAED,KAAAS,OAAO,GAAG,MAAW;MACnB,IAAI,CAACvH,kBAAkB,CAACkD,IAAI,CAAC,EAAE,CAAC;MAEhC,IAAI,CAACkE,KAAK,CAACI,OAAO,CAAC,IAAI,CAACC,iBAAiB,EAAE,CAAC,CAAC;IAC/C,CAAC;IAED,KAAAA,iBAAiB,GAAG,MAAW;MAC7B,MAAMC,EAAE,GAAG,cAAc,IAAI,CAAC1H,kBAAkB,CAAC2H,MAAM,GAAG,CAAC,EAAE;MAC7D,MAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAACJ,EAAE,CAAC;MAC1C,IAAIE,MAAM,EAAE;QACVA,MAAM,CAACG,KAAK,EAAE;MAChB;IACF,CAAC;EApB0C;EAE3C1E,QAAQA,CAAA,GAAK;EAoBb2E,SAASA,CAAClB,KAAK,EAAEmB,IAAI;IACnB,OAAOnB,KAAK;EACd;;;uCA5BWX,2BAA2B,EAAA9G,+DAAA,CAAAhB,yDAAA;IAAA;EAAA;;;YAA3B8H,2BAA2B;MAAAzB,SAAA;MAAAwD,MAAA;QAAAlI,kBAAA;MAAA;MAAAmI,OAAA;QAAAd,wBAAA;MAAA;MAAA1C,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAsD,qCAAApD,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCLhC3F,4DAJR,aAA8C,eACvB,YACZ,SACD,SACE;UAAAA,oDAAA,GAA2C;;UAAAA,0DAAA,EAAK;UAElDA,4DADF,YAAsB,gBAG2C;;UADvDA,wDAAA,mBAAAgJ,6DAAA;YAAA,OAASpD,GAAA,CAAAsC,OAAA,EAAS;UAAA,EAAC;UAEzBlI,4DAAA,cAAyE;UACvEA,uDAAA,YAAyB;UAKnCA,0DAJQ,EAAM,EACC,EACN,EACF,EACC;UAERA,4DAAA,gBAAsD;UACpDA,wDAAA,KAAAiJ,0CAAA,gBAA4E;UAkBlFjJ,0DAFI,EAAQ,EACF,EACJ;;;UAhCMA,uDAAA,GAA2C;UAA3CA,+DAAA,CAAAA,yDAAA,kCAA2C;UAIrCA,uDAAA,GAAsD;UAAtDA,mEAAA,UAAAA,yDAAA,qCAAsD;UAS7DA,uDAAA,GAA8C;UAA9CA,wDAAA,qBAAAA,6DAAA,IAAAoJ,GAAA,EAA8C;UAChCpJ,uDAAA,EAAuB;UAAcA,wDAArC,YAAA4F,GAAA,CAAAjF,kBAAA,CAAuB,iBAAAiF,GAAA,CAAA+C,SAAA,CAAgC","sources":["./src/app/views/admin-device-settings/admin-device-settings-routing.module.ts","./src/app/views/admin-device-settings/admin-device-settings.component.ts","./src/app/views/admin-device-settings/admin-device-settings.component.html","./src/app/views/admin-device-settings/admin-device-settings.module.ts","./src/app/views/admin-device-settings/allowed-ip-addresses/allowed-ip-addresses.component.ts","./src/app/views/admin-device-settings/allowed-ip-addresses/allowed-ip-addresses.component.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AdminDeviceSettingsComponent } from './admin-device-settings.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AdminDeviceSettingsComponent,\r\n    pathMatch: 'full',\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AdminDeviceSettingsRoutingModule { }\r\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Control, ApiResult, ApiResults } from '../../blocks/services/models';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { HydraApiService } from '../../blocks/services/hydra-api.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ErrorsService } from '../../blocks/services/errors.service';\r\nimport { SpinnerStateService } from '../../blocks/services/spinner-state.service';\r\nimport { DeviceSettings, FieldDefinition, MetaDataType, Tab } from 'shared-code-lib';\r\nimport { UserStateService } from '../../blocks/services/user-state.service';\r\n\r\n@Component({\r\n  selector: 'app-admin-device-settings',\r\n  templateUrl: './admin-device-settings.component.html',\r\n  styleUrls: ['./admin-device-settings.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AdminDeviceSettingsComponent implements OnInit {\r\n  rightControls: Array<Control> = [];\r\n  deviceSecretField: FieldDefinition;\r\n  deviceSettings: DeviceSettings = new DeviceSettings();\r\n  saveButton: Control;\r\n  closeButton: Control;\r\n  activeTab = 'allowedIPAddresses';\r\n  tabs = new Array<Tab>();\r\n  subscriptions = new Subscription();\r\n  tenantId: string;\r\n\r\n  constructor(\r\n    private translateService: TranslateService,\r\n    private hydraApi: HydraApiService,\r\n    private toastr: ToastrService,\r\n    private errorsService: ErrorsService,\r\n    private spinner: SpinnerStateService,\r\n    private location: Location,\r\n    private route: ActivatedRoute,\r\n    private userState: UserStateService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.createButtons();\r\n    this.createFields();\r\n    this.createTabs();\r\n\r\n    this.subscriptions.add(\r\n      this.route.params.subscribe((params) => {\r\n        this.tenantId = params.tenantId ?? this.userState.user.tenantId;\r\n\r\n        this.hydraApi.getDeviceSettings(this.tenantId, this.settingsLoaded, this.settingsLoadingFailed);\r\n      })\r\n    );\r\n  }\r\n\r\n  private createButtons() {\r\n    this.saveButton = new Control(this.onSave, 'Save', 'btn btn-primary btn-minwidth', '', '', 'btn', false);\r\n    this.closeButton = new Control(this.onClose, 'Close', 'btn btn-light btn-minwidth', '', '', 'btn', false);\r\n    this.rightControls.push(this.saveButton);\r\n    this.rightControls.push(this.closeButton);\r\n\r\n    this.translateService.get('Metadata.Save').subscribe((res) => {\r\n      this.saveButton.updateLabel(res);\r\n    });\r\n    this.translateService.get('Metadata.Cancel').subscribe((res) => {\r\n      this.closeButton.setTranslation(res);\r\n    });\r\n  }\r\n\r\n  private settingsLoaded = (deviceSettings: DeviceSettings) => {\r\n    this.deviceSettings = deviceSettings;\r\n  };\r\n\r\n  onSave = () => {\r\n    this.deviceSettings.allowedIPAddresses = this.deviceSettings.allowedIPAddresses.filter((ip) => ip != '');\r\n    this.hydraApi.setDeviceSettings(this.deviceSettings, this.tenantId, this.settingsSaved, this.saveFailed);\r\n  };\r\n\r\n  settingsSaved = (result: ApiResults) => {\r\n    if (result.success) {\r\n      this.returnToGrid();\r\n    } else {\r\n      this.errorsService.showErrorsModal(result.errors, 'admin-role.failed-save-members');\r\n    }\r\n\r\n    this.spinner.hide();\r\n  };\r\n\r\n  saveFailed = (err: any) => {\r\n    this.toastr.error(this.translateService.instant('admin-role.save-failed'));\r\n    this.spinner.hide();\r\n  };\r\n\r\n  onClose = () => {\r\n    this.returnToGrid();\r\n  };\r\n\r\n  deviceSettingsSaved = (result: ApiResult) => {\r\n    if (result.success) {\r\n      this.toastr.success(this.translateService.instant('admin-device.saved'));\r\n      this.returnToGrid();\r\n    } else {\r\n      this.spinner.hide();\r\n      this.errorsService.showErrorsModal(result.errors, 'admin-device.validation-errors');\r\n    }\r\n  };\r\n\r\n  deviceSettingsSaveFailed = (err: any) => {\r\n    this.toastr.error(this.translateService.instant('admin-device.save-failed'));\r\n    this.spinner.hide();\r\n  };\r\n\r\n  returnToGrid = () => this.location.back();\r\n\r\n  private createFields = () => {\r\n    this.deviceSecretField = new FieldDefinition({\r\n      type: MetaDataType.Text,\r\n      label: this.translateService.instant('admin-device.settings-secret'),\r\n      placeholder: this.translateService.instant('admin-device.settings-secret'),\r\n    });\r\n  };\r\n\r\n  private settingsLoadingFailed = (err: any) => {\r\n    this.toastr.error(this.translateService.instant('admin-device.settings-load-failed'));\r\n    console.log(err);\r\n  };\r\n\r\n  private createTabs = () => {\r\n    this.tabs.push(new Tab('allowedIPAddresses', this.translateService.instant('admin-device.allowed-ip-addresses')));\r\n  };\r\n\r\n  activateTab = (view) => {\r\n    this.activeTab = view;\r\n  };\r\n}\r\n","<div\r\n  class=\"admin-device-settings project-list-dashboard-body d-flex flex-column min-h-fit-content\"\r\n  appAutoFocusFirstInput\r\n>\r\n  <app-secondary-header [headerText]=\"'admin-device.settings-header-text' | translate\" [rightControls]=\"rightControls\">\r\n  </app-secondary-header>\r\n\r\n  <div class=\"container-fluid col min-h-fit-content\" id=\"spinnerPanel\">\r\n    <div class=\"panel h-100 row m-0 min-h-fit-content\">\r\n      <div class=\"col-12 col-md-3 properties-panel\">\r\n        <div class=\"col p-0\">\r\n          <app-field [field]=\"deviceSecretField\" [(value)]=\"deviceSettings.secret\"></app-field>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-12 col-md-9 panel p-0 border-bottom-0 d-flex flex-column min-h-fit-content\">\r\n        <div class=\"panel-wrapper vcenter\">\r\n          <div class=\"col panel-header\">\r\n            {{ 'admin-device.additional-properties' | translate }}\r\n          </div>\r\n        </div>\r\n\r\n        <app-tab-bar [tabs]=\"tabs\" (tabSelected)=\"activateTab($event)\"></app-tab-bar>\r\n\r\n        <div class=\"tab-content min-h-fit-content content-padding h-100\">\r\n          <div class=\"h-100\" *ngIf=\"'allowedIPAddresses' == activeTab\">\r\n            <app-allowed-ip-addresses\r\n              class=\"h-100\"\r\n              [(allowedIPAddresses)]=\"deviceSettings.allowedIPAddresses\"\r\n            ></app-allowed-ip-addresses>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { AdminDeviceSettingsRoutingModule } from './admin-device-settings-routing.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { PageModule } from './../../blocks/page/page.module';\r\nimport { ComponentsModule } from './../../blocks/components/components.module';\r\nimport { AdminDeviceSettingsComponent } from './admin-device-settings.component';\r\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar-portable';\r\nimport { AllowedIPAddressesComponent } from './allowed-ip-addresses/allowed-ip-addresses.component';\r\nimport { AutoFocusFirstInputModule, TabBarModule, FieldsModule, IconsModule } from 'shared-code-lib';\r\n\r\n@NgModule({\r\n  declarations: [AdminDeviceSettingsComponent, AllowedIPAddressesComponent],\r\n  imports: [\r\n    CommonModule,\r\n    TranslateModule,\r\n    PageModule,\r\n    ComponentsModule,\r\n    FormsModule,\r\n    PerfectScrollbarModule,\r\n    IconsModule,\r\n    AdminDeviceSettingsRoutingModule,\r\n    FieldsModule,\r\n    AutoFocusFirstInputModule,\r\n    TabBarModule,\r\n  ],\r\n})\r\nexport class AdminDeviceSettingsModule {}\r\n","import { Component, OnInit, ViewEncapsulation, Input, Output, EventEmitter } from '@angular/core';\r\nimport { DelayService } from 'shared-code-lib';\r\n\r\n@Component({\r\n  selector: 'app-allowed-ip-addresses',\r\n  templateUrl: './allowed-ip-addresses.component.html',\r\n  styleUrls: ['./allowed-ip-addresses.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AllowedIPAddressesComponent implements OnInit {\r\n  @Input() allowedIPAddresses: Array<string> = [];\r\n  @Output() allowedIPAddressesChange = new EventEmitter<Array<string>>();\r\n\r\n  constructor(private delay: DelayService) { }\r\n\r\n  ngOnInit() { }\r\n\r\n  onDeleteIp = (index: number): void => {\r\n    this.allowedIPAddresses.splice(index, 1);\r\n  };\r\n\r\n  onAddIp = (): void => {\r\n    this.allowedIPAddresses.push('');\r\n\r\n    this.delay.execute(this.setFocusToAddedIp, 1);\r\n  };\r\n\r\n  setFocusToAddedIp = (): void => {\r\n    const id = `setting-ip-${this.allowedIPAddresses.length - 1}`;\r\n    const lastIp = document.getElementById(id);\r\n    if (lastIp) {\r\n      lastIp.focus();\r\n    }\r\n  };\r\n\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n}\r\n","<div class=\"admin-device-settings-properties\">\r\n  <table class=\"table\">\r\n    <thead>\r\n      <tr>\r\n        <td>{{ 'admin-device.ip-address' | translate }}</td>\r\n        <td class=\"col-width\">\r\n          <button class=\"button-icon\"\r\n                  (click)=\"onAddIp()\"\r\n                  title=\"{{ 'admin-device.tooltip-addip' | translate }}\">\r\n            <div class=\"add-circle d-flex justify-content-center align-items-center\">\r\n              <i class=\"icon-plus\"></i>\r\n            </div>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </thead>\r\n\r\n    <tbody [perfectScrollbar]=\"{ suppressScrollX: true }\">\r\n      <tr *ngFor=\"let ip of allowedIPAddresses; let i = index;trackBy: trackByFn\">\r\n        <td>\r\n          <input class=\"form-control ip-input\"\r\n                 type=\"text\"\r\n                [ngModel]=\"allowedIPAddresses[i]\"\r\n                (ngModelChange)=\"allowedIPAddresses[i] = $event\"\r\n                 [id]=\"'setting-ip-' + i.toString()\" />\r\n        </td>\r\n\r\n        <td class=\"data-col-width\" title=\"{{ 'admin-device.tooltip-deleteip' | translate }}\">\r\n          <app-delete-icon\r\n            class=\"allowed-ip-addresses-delete-button\"\r\n            (click)=\"onDeleteIp(i)\">\r\n          </app-delete-icon>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n"],"names":["RouterModule","AdminDeviceSettingsComponent","routes","path","component","pathMatch","AdminDeviceSettingsRoutingModule","forChild","imports","i1","exports","Control","TranslateService","ActivatedRoute","Location","Subscription","HydraApiService","ToastrService","ErrorsService","SpinnerStateService","DeviceSettings","FieldDefinition","MetaDataType","Tab","UserStateService","i0","ɵɵelementStart","ɵɵtwoWayListener","AdminDeviceSettingsComponent_div_15_Template_app_allowed_ip_addresses_allowedIPAddressesChange_1_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵtwoWayBindingSet","deviceSettings","allowedIPAddresses","ɵɵresetView","ɵɵelementEnd","ɵɵadvance","ɵɵtwoWayProperty","constructor","translateService","hydraApi","toastr","errorsService","spinner","location","route","userState","rightControls","activeTab","tabs","Array","subscriptions","settingsLoaded","onSave","filter","ip","setDeviceSettings","tenantId","settingsSaved","saveFailed","result","success","returnToGrid","showErrorsModal","errors","hide","err","error","instant","onClose","deviceSettingsSaved","deviceSettingsSaveFailed","back","createFields","deviceSecretField","type","Text","label","placeholder","settingsLoadingFailed","console","log","createTabs","push","activateTab","view","ngOnInit","createButtons","add","params","subscribe","user","getDeviceSettings","saveButton","closeButton","get","res","updateLabel","setTranslation","ɵɵdirectiveInject","i2","i3","i4","i5","i6","i7","i8","selectors","decls","vars","consts","template","AdminDeviceSettingsComponent_Template","rf","ctx","ɵɵelement","AdminDeviceSettingsComponent_Template_app_field_valueChange_7_listener","secret","ɵɵtext","ɵɵlistener","AdminDeviceSettingsComponent_Template_app_tab_bar_tabSelected_13_listener","ɵɵtemplate","AdminDeviceSettingsComponent_div_15_Template","ɵɵproperty","ɵɵpipeBind1","ɵɵtextInterpolate1","CommonModule","FormsModule","TranslateModule","PageModule","ComponentsModule","PerfectScrollbarModule","AllowedIPAddressesComponent","AutoFocusFirstInputModule","TabBarModule","FieldsModule","IconsModule","AdminDeviceSettingsModule","declarations","EventEmitter","DelayService","AllowedIPAddressesComponent_tr_13_Template_input_ngModelChange_2_listener","i_r2","index","ctx_r2","AllowedIPAddressesComponent_tr_13_Template_app_delete_icon_click_5_listener","onDeleteIp","toString","ɵɵpropertyInterpolate","delay","allowedIPAddressesChange","splice","onAddIp","execute","setFocusToAddedIp","id","length","lastIp","document","getElementById","focus","trackByFn","item","inputs","outputs","AllowedIPAddressesComponent_Template","AllowedIPAddressesComponent_Template_button_click_8_listener","AllowedIPAddressesComponent_tr_13_Template","ɵɵtextInterpolate","ɵɵpureFunction0","_c0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}